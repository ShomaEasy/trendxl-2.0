# üéØ –í–´–ü–û–õ–ù–ò–¢–ï –í –°–¢–†–û–ì–û–ú –ü–û–†–Ø–î–ö–ï!

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ø–æ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É –∑–∞ —Ä–∞–∑!

---

## üìç –û—Ç–∫—Ä–æ–π—Ç–µ Supabase SQL Editor:

üëâ https://supabase.com/dashboard/project/jynidxwtbjrxmsbfpqra/editor

---

## ü•á –®–ê–ì 1: –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã

### –§–∞–π–ª: `MINIMAL_TABLES_ONLY.sql`

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–ï–°–¨ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ **RUN**

–≠—Ç–æ—Ç —à–∞–≥ —Å–æ–∑–¥–∞–µ—Ç:

- ‚úÖ –¢–∞–±–ª–∏—Ü—É `scan_history`
- ‚úÖ –¢–∞–±–ª–∏—Ü—É `daily_free_analyses`
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã
- ‚úÖ –í–∫–ª—é—á–∞–µ—Ç RLS
- ‚úÖ –î–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

**–ñ–î–ò–¢–ï –£–°–ü–ï–®–ù–û–ì–û –í–´–ü–û–õ–ù–ï–ù–ò–Ø!**

---

## ü•à –®–ê–ì 2: –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –§–∞–π–ª: `ADD_POLICIES.sql`

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–ï–°–¨ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ **RUN**

–≠—Ç–æ—Ç —à–∞–≥ —Å–æ–∑–¥–∞–µ—Ç:

- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è `scan_history` (3 –ø–æ–ª–∏—Ç–∏–∫–∏)
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è `daily_free_analyses` (3 –ø–æ–ª–∏—Ç–∏–∫–∏)

**–ñ–î–ò–¢–ï –£–°–ü–ï–®–ù–û–ì–û –í–´–ü–û–õ–ù–ï–ù–ò–Ø!**

---

## ü•â –®–ê–ì 3: –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –§–∞–π–ª: `ADD_FUNCTIONS.sql`

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–ï–°–¨ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ **RUN**

–≠—Ç–æ—Ç —à–∞–≥ —Å–æ–∑–¥–∞–µ—Ç:

- ‚úÖ –§—É–Ω–∫—Ü–∏—é `can_use_free_trial()`
- ‚úÖ –§—É–Ω–∫—Ü–∏—é `record_free_trial_usage()`
- ‚úÖ –§—É–Ω–∫—Ü–∏—é `get_free_trial_info()` ‚≠ê **–≠—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç –æ—à–∏–±–∫—É 404!**

**–ñ–î–ò–¢–ï –£–°–ü–ï–®–ù–û–ì–û –í–´–ü–û–õ–ù–ï–ù–ò–Ø!**

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö 3 —à–∞–≥–æ–≤, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
SELECT table_name
FROM information_schema.tables
WHERE table_schema = 'public'
AND table_name IN ('scan_history', 'daily_free_analyses');

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π
SELECT proname
FROM pg_proc
WHERE proname IN ('can_use_free_trial', 'get_free_trial_info', 'record_free_trial_usage');

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–∏—Ç–∏–∫
SELECT tablename, policyname
FROM pg_policies
WHERE tablename IN ('scan_history', 'daily_free_analyses');
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

- 2 —Ç–∞–±–ª–∏—Ü—ã
- 3 —Ñ—É–Ω–∫—Ü–∏–∏
- 6 –ø–æ–ª–∏—Ç–∏–∫ (3 –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã)

---

## üéâ –ì–û–¢–û–í–û!

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:

- ‚úÖ –û—à–∏–±–∫–∞ 404 –∏—Å—á–µ–∑–Ω–µ—Ç
- ‚úÖ Free trial counter –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ My Trends –ø–æ–∫–∞–∂–µ—Ç –∏—Å—Ç–æ—Ä–∏—é
- ‚úÖ –í—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—Ä–∞–±–æ—Ç–∞—é—Ç

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend –∏ frontend!**
