# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

## –ß—Ç–æ —ç—Ç–æ?

–¢–µ–ø–µ—Ä—å –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç **1 –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤ –¥–µ–Ω—å** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–µ—Ä–µ–¥ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –ø–æ–¥–ø–∏—Å–∫–∏! üéÅ

## –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (5 –º–∏–Ω—É—Ç)

### 1Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase

1. –û—Ç–∫—Ä—ã—Ç—å [Supabase Dashboard](https://supabase.com/dashboard)
2. –í—ã–±—Ä–∞—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ **SQL Editor** (–ª–µ–≤–æ–µ –º–µ–Ω—é)
4. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
5. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å —Ñ–∞–π–ª `backend/supabase_free_trial_migration.sql`
6. –í—Å—Ç–∞–≤–∏—Ç—å –∏ –Ω–∞–∂–∞—Ç—å **Run** ‚ñ∂Ô∏è

### 2Ô∏è‚É£ –î–µ–ø–ª–æ–π –Ω–∞ Railway/Vercel

–ò–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –≤ –∫–æ–¥–µ - –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π—Ç–µ git push:

```bash
git add .
git commit -m "feat: Add 1 free daily analysis for new users"
git push origin main
```

Railway/Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ—è—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è! üöÄ

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

#### –¢–µ—Å—Ç 1: –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ (–¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å ‚úÖ)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –°–¥–µ–ª–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
3. ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!

#### –¢–µ—Å—Ç 2: –í—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞ –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ ‚ùå)

1. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–¥–µ–ª–∞—Ç—å –≤—Ç–æ—Ä–æ–π –∞–Ω–∞–ª–∏–∑
2. ‚ùå –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞: "You've used your free daily analysis"

#### –¢–µ—Å—Ç 3: –°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å (–¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å ‚úÖ)

1. –ü–æ–¥–æ–∂–¥–∞—Ç—å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–¥–µ–ª–∞—Ç—å –∞–Ω–∞–ª–∏–∑
3. ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è:

‚úÖ **–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ –ë–î:** `daily_free_analyses`

- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å

‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω endpoint `/api/v1/analyze`:**

- –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞

‚úÖ **–ù–æ–≤—ã–π endpoint `/api/v1/free-trial/info`:**

- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ UI

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –∞–Ω–∞–ª–∏–∑
  ‚Üì
–ï—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞? ‚Üí –î–∞ ‚Üí ‚úÖ –†–∞–∑—Ä–µ—à–∏—Ç—å
  ‚Üì –ù–µ—Ç
–ï—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å–µ–≥–æ–¥–Ω—è? ‚Üí –î–∞ ‚Üí ‚úÖ –†–∞–∑—Ä–µ—à–∏—Ç—å + –∑–∞–ø–∏—Å–∞—Ç—å
  ‚Üì –ù–µ—Ç
‚ùå –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–¥–ø–∏—Å–∫–µ
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### SQL –ø—Ä–æ–≤–µ—Ä–∫–∞:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
SELECT * FROM public.daily_free_analyses LIMIT 1;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏
SELECT proname FROM pg_proc WHERE proname LIKE '%free_trial%';
-- –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: can_use_free_trial, record_free_trial_usage, get_free_trial_info
```

### API –ø—Ä–æ–≤–µ—Ä–∫–∞:

```bash
# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö
curl -X GET "https://your-backend.railway.app/api/v1/free-trial/info" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

```sql
-- –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å–µ–≥–æ–¥–Ω—è?
SELECT COUNT(DISTINCT user_id) as free_users_today
FROM daily_free_analyses
WHERE analysis_date = CURRENT_DATE;

-- –¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT
    user_id,
    COUNT(*) as total_analyses
FROM daily_free_analyses
GROUP BY user_id
ORDER BY total_analyses DESC
LIMIT 10;
```

## Troubleshooting

### ‚ùå –û—à–∏–±–∫–∞: "function does not exist"

**–†–µ—à–µ–Ω–∏–µ:** –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥ 1.

### ‚ùå Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
cd backend
python main.py

# Railway
railway logs
```

### ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –ø–æ–ø—ã—Ç–∫—É

**–°–±—Ä–æ—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

```sql
DELETE FROM daily_free_analyses
WHERE user_id = 'your-user-uuid'
AND analysis_date = CURRENT_DATE;
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ production
2. üìä –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
3. üí¨ –û–±–Ω–æ–≤–∏—Ç—å UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `FREE_TRIAL_SETUP.md`

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –¢–µ–ø–µ—Ä—å –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à –ø—Ä–æ–¥—É–∫—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ!
